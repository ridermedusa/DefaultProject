(function ($) { $.fn.extend({ CreateJcrop: function (Option) { $("#CreateJProp").html(""); var $this = this; var width = ""; var height = ""; if (Option) { width = Option.width; height = Option.height } var html = '<img src="" id="target"  style="width:' + width + "px;height:" + height + 'px;"  />'; html += '<form id="coords" class="coords" onsubmit="return false;">'; html += '<input type="hidden"  id="x1" name="x1" />'; html += '<input type="hidden" id="y1" name="y1" />'; html += '<input type="hidden"   id="x2" name="x2" />'; html += '<input type="hidden"  id="y2" name="y2" />'; html += '<input type="hidden"  id="w" name="w" />'; html += '<input type="hidden"   id="h" name="h" />'; html += "</form>"; $this.html(html) }, BindJcropEven: function (src, Recommend, option, SelectEven, DbclickEven) { $("#target").attr("src", src); var maxSize = []; var minSize = []; bgColor = "black"; bgOpacity = 0.6; if (option) { if (option.maxSize) { maxSize = option.maxSize } if (option.minSize) { minSize = option.minSize } if (option.bgColor) { bgColor = option.bgColor } if (option.bgOpacity) { bgOpacity = option.bgOpacity } } var jcrop_api; $("#target").Jcrop({ allowSelect: true, allowMove: true, allowResize: true, trackDocument: true, bgColor: bgColor, bgOpacity: bgOpacity, bgFade: true, aspectRatio: Recommend, keySupport: true, maxSize: maxSize, minSize: minSize, onChange: showCoords, onSelect: SelectEven, onRelease: clearCoords, onDblClick: DbclickEven }, function () { jcrop_api = this }) } }); function showCoords(c) { $("#x1").val(parseInt(c.x)); $("#y1").val(parseInt(c.y)); $("#x2").val(parseInt(c.x2)); $("#y2").val(parseInt(c.y2)); $("#w").val(parseInt(c.w)); $("#h").val(parseInt(c.h)) } function clearCoords() { $("#coords input").val("") } })(jQuery);